<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DieselChecker - проверка соблюдения правил в коммерческих разделах форума Дизель</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
  <script src="https://unpkg.com/vue-router@3.1.5/dist/vue-router.min.js"></script>
  <script src="https://unpkg.com/lodash@4/lodash.min.js"></script>
  <script src="https://unpkg.com/axios@0.19.2/dist/axios.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js"></script>

  <script src="/socket.io/socket.io.js"></script>

  <link rel="stylesheet" href="https://unpkg.com/balloon-css/balloon.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
</head>
<body>
  <section class="section">
    <div id="app" class="container">
      <div class="control">
        <div class="select">
          <select v-model="forum_id">
            <option value="null">Выберите раздел</option>
            <option v-for="forum in forums" v-bind:value="forum.id">
              {{ forum.title }}
            </option>
          </select>
        </div>
      </div>
      
      <p v-show="loading">Загрузка тем...</p>
      <table v-show="!loading" class="table">
        <thead>
          <tr>
            <th>#</th>
            <th>Название</th>
            <th>Автор</th>
            <th>Ответов автора за сегодня</th>
          </tr>
        </thead>
        <tbody>
          <tr v-show="!loading && !filteredTopics.length"><td>Нет тем для отображения</td></tr>
          
          <tr v-show="filteredTopics.length" v-for="(topic, i) in filteredTopics" v-bind:key="topic.id">
            <td>{{ i + 1}}</td>
            <td>
              <a target="_blank" :href="getTopicHref(topic)">{{ topic.title }}</a>
            </td>
            <td>
              <a target="_blank" :href="getTopicAuthorHref(topic)">{{ topic.author_name }}</a>
            </td>
            <td>
              <span :aria-label="getTopicPosts(topic)" data-balloon-break data-balloon-pos="left">{{ topic.author_posts.length }}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
  </body>
  <script src="/js/app.js"></script>
</html>
